function setGlobalOptions(){var e=window.location.search.split("?")[1].split("&"),t={};e.forEach(function(e){var a=e.split("=")[0],n=e.split("=")[1];switch(a){case"feat":t.featureID=n,t.dataSource=0===t.featureID.indexOf("mdn-")?"mdn":"caniuse";break;case"periods":t.periods=n.split(",");break;case"accessible-colours":t.accessibleColours="true"===n;break;case"image-base":"none"!==n&&(t.imageBase=n);break;case"screenshot":t.screenshot="true"===n}}),t.periods||(t.periods=["future_1","current","past_1","past_2"]),OPTIONS=t}function getShortenedBrowserVersion(e){return e&&e.indexOf("-")>-1&&(e=e.split("-")[1]),e}function get(e){return new Promise(function(t,a){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){200===n.status?t(JSON.parse(n.response)):a(Error(n.statusText))},n.onerror=function(){a(Error("Network Error"))},n.send()})}function post(e,t){return new Promise(function(a,n){var r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.onload=function(){200===r.status?a(JSON.parse(r.response)):n(Error(r.statusText))},r.onerror=function(){n(Error("Network Error"))},r.send(JSON.stringify(t))})}function getFeature(){switch(OPTIONS.dataSource){case"mdn":return post(embedAPI+"/mdn-browser-compat-data",{feature:OPTIONS.featureID}).then(function(e){return FEATURE=Object.assign({url:e.mdn_url},e),getBrowserData()});case"caniuse":return get(caniuseDataUrl).then(function(e){return FEATURE=Object.assign({url:"https://caniuse.com/#feat="+OPTIONS.featureID},e.data[OPTIONS.featureID]),getBrowserData(e.agents)})}}function getBrowserData(e){return Promise.resolve().then(function(){return e||get(caniuseDataUrl).then(function(e){return e.agents})}).then(function(e){return parseBrowserData(e)})}function parseBrowserData(e){for(var t={},a=0;a<BROWSERS.length;a++){for(var r,s=BROWSERS[a],o=e[s].current_version,i=0;i<e[s].version_list.length;i++)if(0===e[s].version_list[i].era){r=i;break}r=parseInt(r),t[s]={};for(var i=0;i<OPTIONS.periods.length;i++){var d=OPTIONS.periods[i];"current"===d?t[s][d]=o:d.indexOf("past")>-1?(n=parseInt(d.split("_")[1]),t[s][d]=e[s].version_list[r-n]?e[s].version_list[r-n].version:null):d.indexOf("future")>-1&&(n=parseInt(d.split("_")[1]),t[s][d]=e[s].version_list[r+n]?e[s].version_list[r+n].version:null)}}for(var c={},a=0;a<BROWSERS.length;a++){var s=BROWSERS[a];c[s]={};for(var i=0;i<OPTIONS.periods.length;i++){var d=OPTIONS.periods[i],u=t[s][d],l=e[s].usage_global[u];l=l?l.toFixed(2):0,c[s][d]=l}}return BROWSER_DATA={versions:t,usage:c}}function parseSupportData(){function e(e,t){a[e][t]=FEATURE.stats[e][BROWSER_DATA.versions[e][t]]}function t(e,t){function n(e){var t;return r[e]?t=r[e]:r[0]&&r[0][e]?t=r[0][e]:r[1]&&r[1][e]&&(t=r[1][e]),t&&(t=t.replace(/â‰¤/g,"")),t}if(BROWSER_DATA.versions[e][t]){var r=FEATURE.support[MDN_BROWSERS_KEY[e]];if(!r)return void(a[e][t]=FEATURE_IDENTIFIERS.unknown);var s=BROWSER_DATA.versions[e][t],o=n("version_added"),i=n("version_removed"),d=!1;!0===o?d=!0:"TP"===s&&o>0?d=!0:parseFloat(s)>=parseFloat(o)&&(d=!0),i&&parseFloat(s)<=parseFloat(i)&&(d=!1);var c=d?FEATURE_IDENTIFIERS.supported:FEATURE_IDENTIFIERS.unsupported;a[e][t]=c}}for(var a={},n=0;n<BROWSERS.length;n++){var r=BROWSERS[n];a[r]={};for(var s=0;s<OPTIONS.periods.length;s++){var o=OPTIONS.periods[s];switch(OPTIONS.dataSource){case"mdn":t(r,o);break;case"caniuse":e(r,o)}}}return a}function displayLoadingMessage(){var e;e=OPTIONS.featureID?OPTIONS.imageBase?'<picture><source type="image/webp" srcset="'+OPTIONS.imageBase+'.webp"><source type="image/png" srcset="'+OPTIONS.imageBase+'.png"><source type="image/jpeg" srcset="'+OPTIONS.imageBase+'.jpg"><img src="'+OPTIONS.imageBase+'.png" alt="Data on support for the '+OPTIONS.featureID+' feature across the major browsers"></picture>':"Can I Use "+OPTIONS.featureID+"? Data on support for the "+OPTIONS.featureID+" feature across the major browsers. (Embed Loading)":"No feature ID was specified",document.getElementById("defaultMessage").innerHTML=e}function displayFeatureInformation(){if(document.getElementById("featureTitle").textContent=FEATURE.title,document.getElementById("featureLink").href=FEATURE.url,FEATURE.description){var e=FEATURE.description;e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/&lt;code&gt;/g,""),e=e.replace(/&lt;\/code&gt;/g,""),document.getElementById("featureDescription").innerHTML=e}if(FEATURE.usage_perc_y){var t=FEATURE.usage_perc_y,a=FEATURE.usage_perc_a,n=t+a;n=n.toFixed(2),document.getElementById("note").innerHTML='Global: <span class="y">'+t+'%</span> + <span class="a">'+a+"%</span> = "+n+"%"}else FEATURE.status&&(FEATURE.status.experimental&&(document.getElementById("note").innerHTML="<strong>Experimental</strong> feature"),FEATURE.status.deprecated&&(document.getElementById("note").innerHTML="<strong>Deprecated</strong> feature"));if(OPTIONS.accessibleColours&&document.body.classList.add("accessible-colours"),OPTIONS.screenshot){document.body.classList.add("screenshot");var r=new Date,s=["January","February","March","April","May","June","July","August","September","October","November","December"];document.getElementById("footer-right").innerHTML=r.getDate()+" "+s[r.getMonth()]+" "+r.getFullYear(),document.querySelector(".icon-external-link").setAttribute("hidden","true")}else document.getElementById("accessibleColoursToggle").addEventListener("click",function(){document.body.classList.toggle("accessible-colours")});switch(OPTIONS.dataSource){case"mdn":document.getElementById("footer-left").innerHTML='Data from <a href="https://github.com/mdn/browser-compat-data">MDN</a> | Embed from <a href="https://caniuse.bitsofco.de">caniuse.bitsofco.de</a>';break;case"caniuse":document.getElementById("footer-left").innerHTML='Data from <a href="https://caniuse.com">caniuse.com</a> | Embed from <a href="https://caniuse.bitsofco.de">caniuse.bitsofco.de</a>'}document.body.classList.add(OPTIONS.dataSource)}function displayTable(e){for(var t=OPTIONS.periods.length-1;t>-1;t--){for(var a="",n=0;n<BROWSERS.length;n++)a+='<td class="'+BROWSERS[n]+'"></td>';var r=document.createElement("tr");r.className="statistics "+OPTIONS.periods[t],r.innerHTML=a,document.getElementById("tableBody").appendChild(r)}for(var s=!1,o=!1,i=!1,t=0;t<BROWSERS.length;t++)for(var d=BROWSERS[t],c=0;c<OPTIONS.periods.length;c++){for(var u,l=OPTIONS.periods[c],r=document.getElementsByClassName(l)[0],f=r.childNodes,p=0;p<f.length;p++)f[p].className.indexOf(d)>-1&&(u=f[p]);void 0!=e[d][l]&&(u.className+=" "+e[d][l]);var g=getShortenedBrowserVersion(BROWSER_DATA.versions[d][l]),m="<span>"+g+'</span><span class="usage">'+BROWSER_DATA.usage[d][l]+"%</span>";void 0!=BROWSER_DATA.versions[d][l]?u.innerHTML=m:u.innerHTML="<span></span>",void 0!=e[d][l]&&e[d][l].indexOf(FEATURE_IDENTIFIERS.prefixed)>-1&&(s=!0),void 0!=e[d][l]&&e[d][l].indexOf(FEATURE_IDENTIFIERS.unknown)>-1&&(o=!0),void 0!=e[d][l]&&e[d][l].indexOf(FEATURE_IDENTIFIERS.flagged)>-1&&(i=!0)}document.getElementById("legendX").style.display=s?"inline-block":"none",document.getElementById("legendU").style.display=o?"inline-block":"none",document.getElementById("legendD").style.display=i?"inline-block":"none"}function postDocumentHeight(){var e=document.getElementsByClassName("feature")[0].scrollHeight,t="ciu_embed:"+OPTIONS.featureID+":"+e;parent.postMessage(t,"*"),window.onresize=function(t){e=document.getElementsByClassName("feature")[0].scrollHeight;var a="ciu_embed:"+OPTIONS.featureID+":"+e;parent.postMessage(a,"*")}}!function(){function e(){for(var e=document.getElementsByClassName("ciu_embed"),t=0;t<e.length;t++){var a=e[t],n=a.getAttribute("data-feature"),r=a.getAttribute("data-periods"),s=a.getAttribute("data-accessible-colours")||"false",o=a.getAttribute("data-image-base")||"none";if(n){var i="https://caniuse.bitsofco.de/embed/index.html",d='<iframe src="'+i+"?feat="+n+"&periods="+r+"&accessible-colours="+s+"&image-base="+o+'" frameborder="0" width="100%" height="400px"></iframe>';a.innerHTML=d}else a.innerHTML="A feature was not included. Go to <a href='https://caniuse.bitsofco.de/#how-to-use'>https://caniuse.bitsofco.de/#how-to-use</a> to generate an embed."}var c=window.addEventListener?"addEventListener":"attachEvent";(0,window[c])("attachEvent"==c?"onmessage":"message",function(t){var a=t.data;if("string"==typeof a&&a.indexOf("ciu_embed")>-1)for(var n=a.split(":")[1],r=a.split(":")[2],s=0;s<e.length;s++){var o=e[s];if(o.getAttribute("data-feature")===n){var i=parseInt(r)+30;o.childNodes[0].height=i+"px";break}}},!1)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();var OPTIONS,BROWSER_DATA,FEATURE,caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/main/fulldata-json/data-2.0.json",embedAPI="https://api.caniuse.bitsofco.de",BROWSERS=["ie","edge","firefox","chrome","safari","ios_saf","op_mini","and_chr","android","samsung"],MDN_BROWSERS_KEY={ie:"ie",edge:"edge",firefox:"firefox",chrome:"chrome",safari:"safari",ios_saf:"safari_ios",op_mini:"op_mini",and_chr:"chrome_android",android:"android",samsung:"samsunginternet_android"},FEATURE_IDENTIFIERS={supported:"y",unsupported:"n",partial:"a",unknown:"u",prefixed:"x",flagged:"d"};!function(){setGlobalOptions(),displayLoadingMessage(),getFeature().then(function(){return parseSupportData()}).then(function(e){console.log(FEATURE),console.log(e),displayFeatureInformation(),displayTable(e),document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block",postDocumentHeight()}).catch(function(e){document.getElementById("defaultMessage").innerHTML="Feature not found...",console.error(e)})}();